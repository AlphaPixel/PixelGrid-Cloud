<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>PixelGrid.Cloud: Image Processor for WPlace.live and similar</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
</head>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PC96RRNQTF"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-PC96RRNQTF');
</script>


<link rel="icon" href="PixelGridLogoicon.png" sizes="32x32" type="image/png">
<link rel="icon" href="PixelGridLogoicon.png" sizes="256x256" type="image/png">
<link rel="icon" href="PixelGridLogoicon.png" sizes="192x192" type="image/png">
<link rel="apple-touch-icon" href="PixelGridLogoicon.png" sizes="180x180" type="image/png">
<meta name="msapplication-TileImage" content="PixelGridLogoicon.png">

<body>
  <main class="container">
    <section class="controls" aria-label="Controls panel">
      <div class="header-row">
        <button id="helpBtn" class="help-btn" title="How to use this tool">Help</button>
      </div>

      <div class="field">
        <label for="fileInput">Upload image (PNG or JPG)</label>
        <input id="fileInput" type="file" accept="image/png,image/jpeg"
               title="Select a PNG or JPG. Processing happens locally in your browser." />
      </div>

      <div class="grid2">
        <div class="field">
          <label for="maxX">Max X Dimension</label>
          <input id="maxX" type="number" min="1" placeholder="512" value="512"
                 title="Target width in pixels. Leave empty to auto-compute from height." />
        </div>
        <div class="field">
          <label for="maxY">Max Y Dimension</label>
          <input id="maxY" type="number" min="1" placeholder=""
                 title="Target height in pixels. Leave empty to auto-compute from width." />
        </div>
      </div>

      <fieldset class="field" title="Choose the resampling filter used to reach your target size.">
        <legend>Resample</legend>
        <label title="Bilinear: fast, smooth. Good default.">
          <input type="radio" name="resample" value="bilinear" checked /> Bilinear
        </label>
        <label title="Bicubic (Mitchell-Netravali): slower, usually slightly sharper/smoother transitions.">
          <input type="radio" name="resample" value="bicubic" /> Bicubic (Mitchell-Netravali)
        </label>
      </fieldset>

      <fieldset class="field" title="Select a fixed palette for quantization.">
        <legend>Palette</legend>
        <label title="Basic: the free wplace 32-color palette.">
          <input type="radio" name="palette" value="basic" checked /> Basic (32)
        </label>
        <label title="Extended: 64-color palette that is not free.">
          <input type="radio" name="palette" value="extended" /> Extended (64)
        </label>
      </fieldset>

      <fieldset class="field" title="Choose dithering strategy before mapping to the palette.">
        <legend>Dither</legend>
        <label title="None: direct nearest-color mapping; clean but can band.">
          <input type="radio" name="dither" value="none"/> None
        </label>
        <label title="Ordered (Bayer): patterned dithering; stable, grid-like texture.">
          <input type="radio" name="dither" value="ordered" /> Ordered (Bayer)
        </label>
        <label title="Error Diffusion (Floyd-Steinberg): noise-like dithering; often best for photos.">
          <input type="radio" name="dither" value="diffusion" checked /> Error Diffusion (Floyd-Steinberg)
        </label>
      </fieldset>

      <fieldset class="field" title="Optional: enlarge the final pixel art and overlay a counting grid.">
        <legend>Scale & Grid</legend>

        <div class="field">
          <label title="Enable to enlarge by Nx using nearest neighbor and overlay a 1px grid every N pixels. Leave off for Blue Marble.">
            <input id="enlargeToggle" type="checkbox" />
            Enlarge and overlay grid
          </label>
        </div>

        <div class="grid2">
          <div class="field">
            <label for="scaleFactor">Scale/Grid step</label>
            <input id="scaleFactor" type="number" min="1" value="5"
                   title="Integer factor N. Upscales the image by Nx, and spaces grid lines every N pixels." disabled />
          </div>
          <div class="field">
            <label for="gridColor">Grid color</label>
            <input id="gridColor" type="color" value="#000000"
                   title="Color of the 1px grid lines overlaid on the upscaled image." disabled />
          </div>
        </div>
      </fieldset>

      <div class="actions">
        <button id="processBtn" disabled title="Run the full pipeline with the chosen settings.">Process</button>
        <button id="downloadBtn" disabled title="Download the PNG shown in the preview.">Download PNG</button>
      </div>
    </section>

    <section class="preview" aria-label="Output preview">
      <div class="canvas-wrap">
		  <div class="canvas-overlay" aria-hidden="true">
			<h1>PixelGrid Cloud</h1>
			<h2>By AlphaPixel and Wild Iris Marketing</h2>
			<p>Select Image to Begin</p>
		  </div>
        <canvas id="canvas"></canvas>
      </div>
      <div class="meta" id="meta" title="Status and image details"></div>
    </section>
  </main>

  <!-- Help Modal -->
  <div id="helpModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="helpTitle">
    <div class="modal-backdrop" id="helpBackdrop"></div>
    <div class="modal-card">
      <button class="modal-close" id="helpClose" aria-label="Close help">Ã—</button>
      <h2 id="helpTitle">How to use</h2>
      <pre class="help-steps" aria-live="polite">
1. Choose a file (PNG or JPG supported).

2. Set the X and/or Y pixel output size (if you only set one, the other will be computed proportionally). Defaults to 512 wide, which is pretty big to draw by hand.

3. Choose the resize filtering method (bilinear or bicubic). Either should be fine.

4. Choose the palette. Basic is the "free" wplace 32-color palette. Extended is the 64-color palette that's not free.

5. Choose dithering, or not. Dithering can make true-color images look a lot better but approximating missing colors with regular or noise-based patterns of available colors.

6. Choose whether you want blocky upscaling and a grid, and set the scale/grid size and overlay grid color. This blows up each final pixel using nearest neighbor (non-interpolated) enlarge by a factor of x (defaults to 5) and then overlays a grid of user-defined color (defaults to magenta) to help you see individual pixels in a large mass of common color. You do not want this step if you're using Blue Marble ( https://github.com/erickcastillovillegas-hub/wplace-bluemarble )

7. Click the Download PNG button to download an image locally (with the optional upscaling/grid).

This is not a script to draw the image on wplace for you. We don't do botting. It's just a tool to help you create a reference image that humans can follow to design an image to draw by hand.

It's entirely Javascript and runs only in your browser. There's no server processing. It's hosted on Cloudflare Pages.
      </pre>
    </div>
  </div>

  <!-- Footer credits -->
  <footer class="site-footer" role="contentinfo">
    <ul class="credit-list">
      <li class="credit-item">
        <img src="AlphaPixelDevIcon128x128.png" alt="" class="credit-icon" />
        <span>
          <a href="https://alphapixeldev.com" target="_blank" rel="noopener">Imaging software development by AlphaPixel Development ( https://alphapixeldev.com )</a>
        </span>
      </li>
      <li class="credit-item">
        <img src="WildIrisMarketingIcon128x128.png" alt="" class="credit-icon" />
        <span>
          <a href="https://wildirismarketing.com/" target="_blank" rel="noopener">Website design/development and hosting in Evergreen, Colorado by Wild Iris Marketing ( https://wildirismarketing.com/ )</a>
        </span>
      </li>
      <li class="credit-item">
        <img src="github-mark-white128x128.png" alt="" class="credit-icon" />
        <span>
          Open Source on GitHub
          <a href="https://github.com/AlphaPixel/PixelGrid-Cloud" target="_blank" rel="noopener">PixelGrid-Cloud
          ( https://github.com/AlphaPixel/PixelGrid-Cloud )</a>
        </span>
      </li>
    </ul>
  </footer>

  <script src="app.js"></script>
</body>
</html>
